webpackJsonp([1],{1382:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"WdcLegacyModuleNgFactory",function(){return g});var i=n(1),o=n(1394),a=n(1395),l=n(9),r=n(23),s=n(53),u=n(246),c=n(71),d=n(103),h=n(12),p=n(153),b=n(1387),g=i["ɵcmf"](o.a,[],function(t){return i["ɵmod"]([i["ɵmpd"](512,i.ComponentFactoryResolver,i["ɵCodegenComponentFactoryResolver"],[[8,[a.a]],[3,i.ComponentFactoryResolver],i.NgModuleRef]),i["ɵmpd"](4608,l.NgLocalization,l.NgLocaleLocalization,[i.LOCALE_ID,[2,l["ɵa"]]]),i["ɵmpd"](6144,r.b,null,[l.DOCUMENT]),i["ɵmpd"](4608,r.c,r.c,[[2,r.b]]),i["ɵmpd"](5120,s.d,s.a,[[3,s.d],[2,u.a],c.c]),i["ɵmpd"](512,l.CommonModule,l.CommonModule,[]),i["ɵmpd"](512,d.m,d.m,[[2,d.r],[2,d.k]]),i["ɵmpd"](512,r.a,r.a,[]),i["ɵmpd"](256,h.f,!0,[]),i["ɵmpd"](512,h.m,h.m,[[2,h.f]]),i["ɵmpd"](512,p.e,p.e,[]),i["ɵmpd"](512,s.c,s.c,[]),i["ɵmpd"](512,o.a,o.a,[]),i["ɵmpd"](1024,d.i,function(){return[[{path:"",component:b.a}]]},[])])})},1387:function(t,e,n){"use strict";n(90),n(41),n(131),n(103);var i=n(1396);n(1397);e.a=class{constructor(t,e,n,o){this.layerService=t,this.mapService=e,this.geocoder=n,this.router=o,this.layers=[],this.buildPolygon="./img/buildPolygon.gif";var a=tableau.makeConnector();a.init=function(t){var e=tableau.platformVersion,i=e.lastIndexOf("."),l=Number(e.substring(0,i));tableau.log(l),l>10.3&&o.navigateByUrl("/wdc"),n.getCurrentLocation().subscribe(e=>{a.setConnection(e),t(),tableau.submit()},t=>tableau.log(t))},a.getSchema=function(n){tableau.log("Getting Schema"),e.recordStats("getSchema",null,JSON.parse(tableau.connectionData)).subscribe(t=>tableau.log(t),t=>tableau.log(t)),t.getAllMeta().subscribe(t=>{tableau.log(t),this.layers=t;let e=[];for(let n of t)e.push(new i.a(n._id,n.tableSchema.alias,n.tableSchema.columns));n(e)})},a.getData=function(n,i){tableau.log("Getting table "+n.tableInfo.id),tableau.reportProgress("Requesting GeoJson"),e.recordStats("getData",n.tableInfo.id,JSON.parse(tableau.connectionData)).subscribe(t=>tableau.log(t),t=>tableau.log(t)),t.getData({id:n.tableInfo.id}).subscribe(t=>{tableau.reportProgress("Parsing data"),l(t,function(t){tableau.reportProgress("Returning data to Tableau"),n.appendRows(t),i()})})},a.setConnection=function(t){tableau.connectionName="TableauMapping.bi",tableau.connectionData=JSON.stringify(t),tableau.submit()},tableau.registerConnector(a);var l=function(t,e){r(t,function(t){s(t,function(t){u(t,function(t){e(t)})})})},r=function(t,e){for(var n=[],i=t.features,o=0;o<i.length;o++){var a=i[o],l={},r=Object.keys(a.properties);for(let t of r)l[t]=a.properties[t];l.coordinates=a.geometry.coordinates,l.polygonId=o,n.push(l),n.length===t.features.length&&e(n)}},s=function(t,e){var n=0,i=0,o=[];for(let e of t)n+=e.coordinates.length;for(let s of t){var a=s.coordinates,l=0;delete s.coordinates;for(let t of a){var r={subPolygon:null,subPolygonId:null};l+=1,r.subPolygon=t,r.subPolygonId=l,r=Object.assign(r,s),o.push(r),(i+=1)===n&&e(o)}}},u=function(t,e){var n=0,i=0,o=[];for(let e of t)n+=e.subPolygon.length;for(let s of t){var a=s.subPolygon,l=0;delete s.subPolygon;for(let t of a){var r={path:null,longitude:null,latitude:null};l+=1,r.path=l,r.longitude=t[0],r.latitude=t[1],r=Object.assign(r,s),o.push(r),(i+=1)===n&&e(o)}}}}}},1394:function(t,e,n){"use strict";n(193);e.a=class{}},1395:function(t,e,n){"use strict";function i(t){return o["ɵvid"](0,[(t()(),o["ɵeld"](0,0,null,null,98,"div",[["class","demo-card-container"],["layout","row"],["layout-align","center"]],null,null,null,null,null)),(t()(),o["ɵted"](-1,null,["\n  "])),(t()(),o["ɵeld"](2,0,null,null,33,"mat-card",[["class","help-card mat-card"]],null,null,null,a.d,a.a)),o["ɵdid"](3,49152,null,0,l.a,[],null,null),(t()(),o["ɵted"](-1,0,["\n    "])),(t()(),o["ɵeld"](5,0,null,0,11,"mat-card-header",[["class","mat-card-header"]],null,null,null,a.c,a.b)),o["ɵdid"](6,49152,null,0,l.d,[],null,null),(t()(),o["ɵted"](-1,2,["\n      "])),(t()(),o["ɵeld"](8,0,null,0,3,"mat-icon",[["class","mat-card-avatar mat-icon"],["mat-card-avatar",""],["role","img"]],null,null,null,r.b,r.a)),o["ɵdid"](9,16384,null,0,l.b,[],null,null),o["ɵdid"](10,638976,null,0,s.b,[o.Renderer2,o.ElementRef,s.d,[8,null]],null,null),(t()(),o["ɵted"](-1,0,["cloud_download"])),(t()(),o["ɵted"](-1,2,["\n      "])),(t()(),o["ɵeld"](13,0,null,1,2,"mat-card-title",[["class","help-card-title mat-card-title"]],null,null,null,null,null)),o["ɵdid"](14,16384,null,0,l.f,[],null,null),(t()(),o["ɵted"](-1,null,["Connecting with Web Data Connector"])),(t()(),o["ɵted"](-1,2,["\n    "])),(t()(),o["ɵted"](-1,0,["\n    "])),(t()(),o["ɵeld"](18,0,null,0,16,"mat-card-content",[["class","mat-card-content"]],null,null,null,null,null)),o["ɵdid"](19,16384,null,0,l.c,[],null,null),(t()(),o["ɵted"](-1,null,["\n      "])),(t()(),o["ɵeld"](21,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),o["ɵted"](-1,null,["If you're seeing this message you need to access the URL using Tableau's Web Data Connector."])),(t()(),o["ɵted"](-1,null,["\n      "])),(t()(),o["ɵeld"](24,0,null,null,4,"p",[],null,null,null,null,null)),(t()(),o["ɵted"](-1,null,["Copy the URL from your web browser "])),(t()(),o["ɵeld"](26,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),o["ɵted"](-1,null,["https://www.tableaumapping.bi/wdc-legacy"])),(t()(),o["ɵted"](-1,null,[", open Tableau Desktop, in the connections list select 'Web Data Connector' and paste the URL into the connector. Then it's just like a regular Tableau data source."])),(t()(),o["ɵted"](-1,null,["\n      "])),(t()(),o["ɵeld"](30,0,null,null,3,"p",[],null,null,null,null,null)),(t()(),o["ɵted"](-1,null,["You'll need Tableau 10.1, 10.2 or 10.3. If you've got 10.4 or newer why not use our latest connector at "])),(t()(),o["ɵeld"](32,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),o["ɵted"](-1,null,["https://www.tableaumapping.bi/wdc"])),(t()(),o["ɵted"](-1,null,["\n    "])),(t()(),o["ɵted"](-1,0,["\n  "])),(t()(),o["ɵted"](-1,null,["\n  "])),(t()(),o["ɵeld"](37,0,null,null,60,"mat-card",[["class","help-card mat-card"]],null,null,null,a.d,a.a)),o["ɵdid"](38,49152,null,0,l.a,[],null,null),(t()(),o["ɵted"](-1,0,["\n    "])),(t()(),o["ɵeld"](40,0,null,0,11,"mat-card-header",[["class","mat-card-header"]],null,null,null,a.c,a.b)),o["ɵdid"](41,49152,null,0,l.d,[],null,null),(t()(),o["ɵted"](-1,2,["\n      "])),(t()(),o["ɵeld"](43,0,null,0,3,"mat-icon",[["class","mat-card-avatar mat-icon"],["mat-card-avatar",""],["role","img"]],null,null,null,r.b,r.a)),o["ɵdid"](44,16384,null,0,l.b,[],null,null),o["ɵdid"](45,638976,null,0,s.b,[o.Renderer2,o.ElementRef,s.d,[8,null]],null,null),(t()(),o["ɵted"](-1,0,["layers"])),(t()(),o["ɵted"](-1,2,["\n      "])),(t()(),o["ɵeld"](48,0,null,1,2,"mat-card-title",[["class","help-card-title mat-card-title"]],null,null,null,null,null)),o["ɵdid"](49,16384,null,0,l.f,[],null,null),(t()(),o["ɵted"](-1,null,["Building Your Map"])),(t()(),o["ɵted"](-1,2,["\n    "])),(t()(),o["ɵted"](-1,0,["\n    "])),(t()(),o["ɵeld"](53,0,null,0,43,"mat-card-content",[["class","mat-card-content"]],null,null,null,null,null)),o["ɵdid"](54,16384,null,0,l.c,[],null,null),(t()(),o["ɵted"](-1,null,["\n      "])),(t()(),o["ɵeld"](56,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),o["ɵted"](-1,null,["If you're using an older version of Tableau, don't worry we've got you covered! You'll just need to build your map using the polygon mark. Here's how:"])),(t()(),o["ɵted"](-1,null,["\n      "])),(t()(),o["ɵeld"](59,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),o["ɵeld"](60,0,null,null,0,"img",[["width","600px"]],[[8,"src",4]],null,null,null,null)),(t()(),o["ɵted"](-1,null,["\n      "])),(t()(),o["ɵeld"](62,0,null,null,33,"ol",[],null,null,null,null,null)),(t()(),o["ɵted"](-1,null,["\n        "])),(t()(),o["ɵeld"](64,0,null,null,3,"li",[],null,null,null,null,null)),(t()(),o["ɵted"](-1,null,["Change the mark type to "])),(t()(),o["ɵeld"](66,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),o["ɵted"](-1,null,["Polygon"])),(t()(),o["ɵted"](-1,null,["\n        "])),(t()(),o["ɵeld"](69,0,null,null,4,"li",[],null,null,null,null,null)),(t()(),o["ɵted"](-1,null,["Drag the dimenion "])),(t()(),o["ɵeld"](71,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),o["ɵted"](-1,null,["-> Path"])),(t()(),o["ɵted"](-1,null,[" to the Path drop zone"])),(t()(),o["ɵted"](-1,null,["\n        "])),(t()(),o["ɵeld"](75,0,null,null,7,"li",[],null,null,null,null,null)),(t()(),o["ɵted"](-1,null,["Drag both "])),(t()(),o["ɵeld"](77,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),o["ɵted"](-1,null,["-> Polygon ID"])),(t()(),o["ɵted"](-1,null,[" and "])),(t()(),o["ɵeld"](80,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),o["ɵted"](-1,null,["-> Sub Polygon ID"])),(t()(),o["ɵted"](-1,null,[" onto level of detail"])),(t()(),o["ɵted"](-1,null,["\n        "])),(t()(),o["ɵeld"](84,0,null,null,4,"li",[],null,null,null,null,null)),(t()(),o["ɵted"](-1,null,["Either double click "])),(t()(),o["ɵeld"](86,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),o["ɵted"](-1,null,["-> Latitude"])),(t()(),o["ɵted"](-1,null,[" or drag it to the Rows shelf"])),(t()(),o["ɵted"](-1,null,["\n        "])),(t()(),o["ɵeld"](90,0,null,null,4,"li",[],null,null,null,null,null)),(t()(),o["ɵted"](-1,null,["Either douple click "])),(t()(),o["ɵeld"](92,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),o["ɵted"](-1,null,["-> Longitude"])),(t()(),o["ɵted"](-1,null,[" or drag it to the Columns shelf"])),(t()(),o["ɵted"](-1,null,["\n      "])),(t()(),o["ɵted"](-1,null,["\n    "])),(t()(),o["ɵted"](-1,0,["\n  "])),(t()(),o["ɵted"](-1,null,["\n"])),(t()(),o["ɵted"](-1,null,["\n"]))],function(t,e){t(e,10,0),t(e,45,0)},function(t,e){t(e,60,0,e.component.buildPolygon)})}n.d(e,"a",function(){return g});var o=n(1),a=n(339),l=n(153),r=n(89),s=n(53),u=n(1387),c=n(90),d=n(41),h=n(131),p=n(103),b=o["ɵcrt"]({encapsulation:0,styles:[".demo-card-container[_ngcontent-%COMP%] {\n      display: flex;\n      flex-flow: column nowrap;\n      margin-top:30px;\n    }\n\n    .help-card[_ngcontent-%COMP%] {\n      margin: 0 100px 16px 100px;\n    }\n\n    .help-card-title[_ngcontent-%COMP%] {\n      font-size: 22px !important;\n    }"],data:{}}),g=o["ɵccf"]("wdc",u.a,function(t){return o["ɵvid"](0,[(t()(),o["ɵeld"](0,0,null,null,1,"wdc",[],null,null,null,i,b)),o["ɵdid"](1,49152,null,0,u.a,[c.a,d.a,h.a,p.k],null,null)],null,null)},{},{},[])},1396:function(t,e,n){"use strict";e.a=class{constructor(t,e,n){this.id=t,this.alias=e,this.columns=n}}},1397:function(t,e){!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){n(20).init()},function(t,e,n){function i(){var t=l.get(o);if(!t||0===t.length)return[];return t.split(a)}var o="wdc_approved_origins",a=",",l=n(9);t.exports.addApprovedOrigin=function(t){if(t){var e=i();e.push(t),function(t){var e=t.join(a);console.log("Saving approved origins '"+e+"'"),l.set(o,e)}(e)}},t.exports.getApprovedOrigins=i},function(t,e){var n={phaseEnum:{interactivePhase:"interactive",authPhase:"auth",gatherDataPhase:"gatherData"},authPurposeEnum:{ephemeral:"ephemeral",enduring:"enduring"},authTypeEnum:{none:"none",basic:"basic",custom:"custom"},dataTypeEnum:{bool:"bool",date:"date",datetime:"datetime",float:"float",int:"int",string:"string"},columnRoleEnum:{dimension:"dimension",measure:"measure"},columnTypeEnum:{continuous:"continuous",discrete:"discrete"},aggTypeEnum:{sum:"sum",avg:"avg",median:"median",count:"count",countd:"count_dist"},geographicRoleEnum:{area_code:"area_code",cbsa_msa:"cbsa_msa",city:"city",congressional_district:"congressional_district",country_region:"country_region",county:"county",state_province:"state_province",zip_code_postcode:"zip_code_postcode",latitude:"latitude",longitude:"longitude"},unitsFormatEnum:{thousands:"thousands",millions:"millions",billions_english:"billions_english",billions_standard:"billions_standard"},numberFormatEnum:{number:"number",currency:"currency",scientific:"scientific",percentage:"percentage"},localeEnum:{america:"en-us",brazil:"pt-br",china:"zh-cn",france:"fr-fr",germany:"de-de",japan:"ja-jp",korea:"ko-kr",spain:"es-es"},joinEnum:{inner:"inner",left:"left"}};t.exports.apply=function(t){for(var e in n)t[e]=n[e]}},function(t,e){function n(t){this.nativeApiRootObj=t,this._initPublicInterface(),this._initPrivateInterface()}n.prototype._initPublicInterface=function(){console.log("Initializing public interface for NativeDispatcher"),this._submitCalled=!1;var t={};t.abortForAuth=this._abortForAuth.bind(this),t.abortWithError=this._abortWithError.bind(this),t.addCrossOriginException=this._addCrossOriginException.bind(this),t.log=this._log.bind(this),t.submit=this._submit.bind(this),t.reportProgress=this._reportProgress.bind(this),this.publicInterface=t},n.prototype._abortForAuth=function(t){this.nativeApiRootObj.WDCBridge_Api_abortForAuth.api(t)},n.prototype._abortWithError=function(t){this.nativeApiRootObj.WDCBridge_Api_abortWithError.api(t)},n.prototype._addCrossOriginException=function(t){this.nativeApiRootObj.WDCBridge_Api_addCrossOriginException.api(t)},n.prototype._log=function(t){this.nativeApiRootObj.WDCBridge_Api_log.api(t)},n.prototype._submit=function(){return this._submitCalled?void console.log("submit called more than once"):(this._submitCalled=!0,void this.nativeApiRootObj.WDCBridge_Api_submit.api())},n.prototype._initPrivateInterface=function(){console.log("Initializing private interface for NativeDispatcher"),this._initCallbackCalled=!1,this._shutdownCallbackCalled=!1;var t={};t._initCallback=this._initCallback.bind(this),t._shutdownCallback=this._shutdownCallback.bind(this),t._schemaCallback=this._schemaCallback.bind(this),t._tableDataCallback=this._tableDataCallback.bind(this),t._dataDoneCallback=this._dataDoneCallback.bind(this),this.privateInterface=t},n.prototype._initCallback=function(){return this._initCallbackCalled?void console.log("initCallback called more than once"):(this._initCallbackCalled=!0,void this.nativeApiRootObj.WDCBridge_Api_initCallback.api())},n.prototype._shutdownCallback=function(){return this._shutdownCallbackCalled?void console.log("shutdownCallback called more than once"):(this._shutdownCallbackCalled=!0,void this.nativeApiRootObj.WDCBridge_Api_shutdownCallback.api())},n.prototype._schemaCallback=function(t,e){this.nativeApiRootObj.WDCBridge_Api_schemaCallbackEx?this.nativeApiRootObj.WDCBridge_Api_schemaCallbackEx.api(t,e||[]):this.nativeApiRootObj.WDCBridge_Api_schemaCallback.api(t)},n.prototype._tableDataCallback=function(t,e){this.nativeApiRootObj.WDCBridge_Api_tableDataCallback.api(t,e)},n.prototype._reportProgress=function(t){this.nativeApiRootObj.WDCBridge_Api_reportProgress?this.nativeApiRootObj.WDCBridge_Api_reportProgress.api(t):console.log("reportProgress not available from this Tableau version")},n.prototype._dataDoneCallback=function(){this.nativeApiRootObj.WDCBridge_Api_dataDoneCallback.api()},t.exports=n},function(t,e,n){function i(t,e,n){this.privateApiObj=e,this.globalObj=n,this._hasAlreadyThrownErrorSoDontThrowAgain=!1,this.changeTableauApiObj(t)}var o=n(6),a=n(2);i.prototype.init=function(){console.log("Initializing shared WDC"),this.globalObj.onerror=this._errorHandler.bind(this),this._initTriggerFunctions(),this._initDeprecatedFunctions()},i.prototype.changeTableauApiObj=function(t){this.tableauApiObj=t,this.tableauApiObj.makeConnector=this._makeConnector.bind(this),this.tableauApiObj.registerConnector=this._registerConnector.bind(this),a.apply(this.tableauApiObj)},i.prototype._errorHandler=function(t,e,n,i,o){if(console.error(o),this._hasAlreadyThrownErrorSoDontThrowAgain)return!0;var a=t;if(o?a+="   stack:"+o.stack:(a+="   file: "+e,a+="   line: "+n),!this.tableauApiObj||!this.tableauApiObj.abortWithError)throw a;return this.tableauApiObj.abortWithError(a),this._hasAlreadyThrownErrorSoDontThrowAgain=!0,!0},i.prototype._makeConnector=function(){return{init:function(t){t()},shutdown:function(t){t()}}},i.prototype._registerConnector=function(t){for(var e=["init","shutdown","getSchema","getData"],n=e.length-1;n>=0;n--)if("function"!=typeof t[e[n]])throw"The connector did not define the required function: "+e[n];console.log("Connector registered"),this.globalObj._wdc=t,this._wdc=t},i.prototype._initTriggerFunctions=function(){this.privateApiObj.triggerInitialization=this._triggerInitialization.bind(this),this.privateApiObj.triggerSchemaGathering=this._triggerSchemaGathering.bind(this),this.privateApiObj.triggerDataGathering=this._triggerDataGathering.bind(this),this.privateApiObj.triggerShutdown=this._triggerShutdown.bind(this)},i.prototype._triggerInitialization=function(){this._wdc.init(this.privateApiObj._initCallback)},i.prototype._triggerSchemaGathering=function(){this._wdc.getSchema(this.privateApiObj._schemaCallback)},i.prototype._triggerDataGathering=function(t){if(1!=t.length)throw"Unexpected number of tables specified. Expected 1, actual "+t.length.toString();var e=t[0],n=new o(e.tableInfo,e.incrementValue,this.privateApiObj._tableDataCallback);this._wdc.getData(n,this.privateApiObj._dataDoneCallback)},i.prototype._triggerShutdown=function(){this._wdc.shutdown(this.privateApiObj._shutdownCallback)},i.prototype._initDeprecatedFunctions=function(){this.tableauApiObj.initCallback=this._initCallback.bind(this),this.tableauApiObj.headersCallback=this._headersCallback.bind(this),this.tableauApiObj.dataCallback=this._dataCallback.bind(this),this.tableauApiObj.shutdownCallback=this._shutdownCallback.bind(this)},i.prototype._initCallback=function(){this.tableauApiObj.abortWithError("tableau.initCallback has been deprecated in version 2.0.0. Please use the callback function passed to init")},i.prototype._headersCallback=function(t,e){this.tableauApiObj.abortWithError("tableau.headersCallback has been deprecated in version 2.0.0")},i.prototype._dataCallback=function(t,e,n){this.tableauApiObj.abortWithError("tableau.dataCallback has been deprecated in version 2.0.0")},i.prototype._shutdownCallback=function(){this.tableauApiObj.abortWithError("tableau.shutdownCallback has been deprecated in version 2.0.0. Please use the callback function passed to shutdown")},t.exports=i},function(t,e,n){function i(t){this.globalObj=t,this._initMessageHandling(),this._initPublicInterface(),this._initPrivateInterface()}var o=n(1);n(8),i.prototype._initMessageHandling=function(){console.log("Initializing message handling"),this.globalObj.addEventListener("message",this._receiveMessage.bind(this),!1),this.globalObj.document.addEventListener("DOMContentLoaded",this._onDomContentLoaded.bind(this))},i.prototype._onDomContentLoaded=function(){if(this.globalObj.parent!==window&&this.globalObj.parent.postMessage(this._buildMessagePayload("loaded"),"*"),this.globalObj.opener)try{this.globalObj.opener.postMessage(this._buildMessagePayload("loaded"),"*")}catch(t){console.warn("Some versions of IE may not accurately simulate the Web Data Connector. Please retry on a Webkit based browser")}},i.prototype._packagePropertyValues=function(){return{connectionName:this.globalObj.tableau.connectionName,connectionData:this.globalObj.tableau.connectionData,password:this.globalObj.tableau.password,username:this.globalObj.tableau.username,usernameAlias:this.globalObj.tableau.usernameAlias,incrementalExtractColumn:this.globalObj.tableau.incrementalExtractColumn,versionNumber:this.globalObj.tableau.versionNumber,locale:this.globalObj.tableau.locale,authPurpose:this.globalObj.tableau.authPurpose,platformOS:this.globalObj.tableau.platformOS,platformVersion:this.globalObj.tableau.platformVersion,platformEdition:this.globalObj.tableau.platformEdition,platformBuildNumber:this.globalObj.tableau.platformBuildNumber}},i.prototype._applyPropertyValues=function(t){t&&(this.globalObj.tableau.connectionName=t.connectionName,this.globalObj.tableau.connectionData=t.connectionData,this.globalObj.tableau.password=t.password,this.globalObj.tableau.username=t.username,this.globalObj.tableau.usernameAlias=t.usernameAlias,this.globalObj.tableau.incrementalExtractColumn=t.incrementalExtractColumn,this.globalObj.tableau.locale=t.locale,this.globalObj.tableau.language=t.locale,this.globalObj.tableau.authPurpose=t.authPurpose,this.globalObj.tableau.platformOS=t.platformOS,this.globalObj.tableau.platformVersion=t.platformVersion,this.globalObj.tableau.platformEdition=t.platformEdition,this.globalObj.tableau.platformBuildNumber=t.platformBuildNumber)},i.prototype._buildMessagePayload=function(t,e,n){var i={msgName:t,msgData:e,props:n,version:"2.1.3"};return JSON.stringify(i)},i.prototype._sendMessage=function(t,e){var n=this._buildMessagePayload(t,e,this._packagePropertyValues());if(void 0!==this.globalObj.webkit&&void 0!==this.globalObj.webkit.messageHandlers&&void 0!==this.globalObj.webkit.messageHandlers.wdcHandler)this.globalObj.webkit.messageHandlers.wdcHandler.postMessage(n);else{if(!this._sourceWindow)throw"Looks like the WDC is calling a tableau function before tableau.init() has been called.";this._sourceWindow.postMessage(n,this._sourceOrigin)}},i.prototype._getPayloadObj=function(t){var e=null;try{e=JSON.parse(t)}catch(t){return null}return e},i.prototype._getWebSecurityWarningConfirm=function(){var t=this._sourceOrigin,e=new(n(18))(t).host();if(["localhost","tableau.github.io"].indexOf(e)>=0)return!0;if(e&&e.endsWith("online.tableau.com"))return!0;if(o.getApprovedOrigins().indexOf(t)>=0)return console.log("Already approved the origin'"+t+"', not asking again"),!0;var i=this._getLocalizedString("webSecurityWarning")+"\n\n"+e+"\n",a=confirm(i);return a&&o.addApprovedOrigin(t),a},i.prototype._getCurrentLocale=function(){var t=navigator.language||navigator.userLanguage,e=t?t.substring(0,2):"en";return["de","en","es","fr","ja","ko","pt","zh"].indexOf(e)<0&&(e="en"),e},i.prototype._getLocalizedString=function(t){var e=this._getCurrentLocale(),i=n(10),o=n(11),a=n(12),l=n(14);return{de:i,en:o,es:a,fr:n(13),ja:l,ko:n(15),pt:n(16),zh:n(17)}[e][t]},i.prototype._receiveMessage=function(t){console.log("Received message!");if(!this.globalObj._wdc)throw"No WDC registered. Did you forget to call tableau.registerConnector?";var e=this._getPayloadObj(t.data);if(e){this._sourceWindow||(this._sourceWindow=t.source,this._sourceOrigin=t.origin);var n=e.msgData;switch(this._applyPropertyValues(e.props),e.msgName){case"init":this._getWebSecurityWarningConfirm()?(this.globalObj.tableau.phase=n.phase,this.globalObj._tableau.triggerInitialization()):window.close();break;case"shutdown":this.globalObj._tableau.triggerShutdown();break;case"getSchema":this.globalObj._tableau.triggerSchemaGathering();break;case"getData":this.globalObj._tableau.triggerDataGathering(n.tablesAndIncrementValues)}}},i.prototype._initPublicInterface=function(){console.log("Initializing public interface"),this._submitCalled=!1;var t={};t.abortForAuth=this._abortForAuth.bind(this),t.abortWithError=this._abortWithError.bind(this),t.addCrossOriginException=this._addCrossOriginException.bind(this),t.log=this._log.bind(this),t.reportProgress=this._reportProgress.bind(this),t.submit=this._submit.bind(this),this.publicInterface=t},i.prototype._abortForAuth=function(t){this._sendMessage("abortForAuth",{msg:t})},i.prototype._abortWithError=function(t){this._sendMessage("abortWithError",{errorMsg:t})},i.prototype._addCrossOriginException=function(t){console.log("Cross Origin Exception requested in the simulator. Pretending to work."),setTimeout(function(){this.globalObj._wdc.addCrossOriginExceptionCompleted(t)}.bind(this),0)},i.prototype._log=function(t){this._sendMessage("log",{logMsg:t})},i.prototype._reportProgress=function(t){this._sendMessage("reportProgress",{progressMsg:t})},i.prototype._submit=function(){this._sendMessage("submit")},i.prototype._initPrivateInterface=function(){console.log("Initializing private interface");var t={};t._initCallback=this._initCallback.bind(this),t._shutdownCallback=this._shutdownCallback.bind(this),t._schemaCallback=this._schemaCallback.bind(this),t._tableDataCallback=this._tableDataCallback.bind(this),t._dataDoneCallback=this._dataDoneCallback.bind(this),this.privateInterface=t},i.prototype._initCallback=function(){this._sendMessage("initCallback")},i.prototype._shutdownCallback=function(){this._sendMessage("shutdownCallback")},i.prototype._schemaCallback=function(t,e){this._sendMessage("_schemaCallback",{schema:t,standardConnections:e||[]})},i.prototype._tableDataCallback=function(t,e){this._sendMessage("_tableDataCallback",{tableName:t,data:e})},i.prototype._dataDoneCallback=function(){this._sendMessage("_dataDoneCallback")},t.exports=i},function(t,e){function n(t,e,n){this.tableInfo=t,this.incrementValue=e||"",this._dataCallbackFn=n,this.appendRows=this._appendRows.bind(this)}n.prototype._appendRows=function(t){return t?Array.isArray(t)?void this._dataCallbackFn(this.tableInfo.id,t):void console.warn("Table.appendRows must take an array of arrays or array of objects"):void console.warn("rows data is null or undefined")},t.exports=n},function(t,e){t.exports.copyFunctions=function(t,e){for(var n in t)"function"==typeof t[n]&&(e[n]=t[n])}},function(t,e){String.prototype.endsWith||function(){"use strict";var t=function(){try{var t={},e=Object.defineProperty,n=e(t,t,t)&&e}catch(t){}return n}(),e={}.toString,n=function(t){if(null==this)throw TypeError();var n=String(this);if(t&&"[object RegExp]"==e.call(t))throw TypeError();var i=n.length,o=String(t),a=o.length,l=i;if(arguments.length>1){var r=arguments[1];void 0!==r&&(l=r?Number(r):0)!=l&&(l=0)}var s=Math.min(Math.max(l,0),i)-a;if(s<0)return!1;for(var u=-1;++u<a;)if(n.charCodeAt(s+u)!=o.charCodeAt(u))return!1;return!0};t?t(String.prototype,"endsWith",{value:n,configurable:!0,writable:!0}):String.prototype.endsWith=n}()},function(t,e,n){var i;!function(o,a){"use strict";var l=function(t){if("object"!=typeof t.document)throw new Error("Cookies.js requires a `window` with a `document` object");var e=function(t,n,i){return 1===arguments.length?e.get(t):e.set(t,n,i)};return e._document=t.document,e._cacheKeyPrefix="cookey.",e._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),e.defaults={path:"/",secure:!1},e.get=function(t){e._cachedDocumentCookie!==e._document.cookie&&e._renewCache();var n=e._cache[e._cacheKeyPrefix+t];return void 0===n?void 0:decodeURIComponent(n)},e.set=function(t,n,i){return i=e._getExtendedOptions(i),i.expires=e._getExpiresDate(void 0===n?-1:i.expires),e._document.cookie=e._generateCookieString(t,n,i),e},e.expire=function(t,n){return e.set(t,void 0,n)},e._getExtendedOptions=function(t){return{path:t&&t.path||e.defaults.path,domain:t&&t.domain||e.defaults.domain,expires:t&&t.expires||e.defaults.expires,secure:t&&void 0!==t.secure?t.secure:e.defaults.secure}},e._isValidDate=function(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())},e._getExpiresDate=function(t,n){if(n=n||new Date,"number"==typeof t?t=t===1/0?e._maxExpireDate:new Date(n.getTime()+1e3*t):"string"==typeof t&&(t=new Date(t)),t&&!e._isValidDate(t))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return t},e._generateCookieString=function(t,e,n){var i=(t=(t=t.replace(/[^#$&+\^`|]/g,encodeURIComponent)).replace(/\(/g,"%28").replace(/\)/g,"%29"))+"="+(e=(e+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent));return i+=(n=n||{}).path?";path="+n.path:"",i+=n.domain?";domain="+n.domain:"",i+=n.expires?";expires="+n.expires.toUTCString():"",i+=n.secure?";secure":""},e._getCacheFromString=function(t){for(var n={},i=t?t.split("; "):[],o=0;o<i.length;o++){var a=e._getKeyValuePairFromCookieString(i[o]);void 0===n[e._cacheKeyPrefix+a.key]&&(n[e._cacheKeyPrefix+a.key]=a.value)}return n},e._getKeyValuePairFromCookieString=function(t){var e=t.indexOf("=");e=e<0?t.length:e;var n,i=t.substr(0,e);try{n=decodeURIComponent(i)}catch(t){console&&"function"==typeof console.error&&console.error('Could not decode cookie with key "'+i+'"',t)}return{key:n,value:t.substr(e+1)}},e._renewCache=function(){e._cache=e._getCacheFromString(e._document.cookie),e._cachedDocumentCookie=e._document.cookie},e._areEnabled=function(){var t="cookies.js",n="1"===e.set(t,1).get(t);return e.expire(t),n},e.enabled=e._areEnabled(),e},r=o&&"object"==typeof o.document?l(o):l;void 0===(i=function(){return r}.call(e,n,e,t))||(t.exports=i)}("undefined"==typeof window?this:window)},function(t,e){t.exports={webSecurityWarning:"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:"}},function(t,e){t.exports={webSecurityWarning:"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:"}},function(t,e){t.exports={webSecurityWarning:"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:"}},function(t,e){t.exports={webSecurityWarning:"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:"}},function(t,e){t.exports={webSecurityWarning:"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:"}},function(t,e){t.exports={webSecurityWarning:"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:"}},function(t,e){t.exports={webSecurityWarning:"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:"}},function(t,e){t.exports={webSecurityWarning:"wwTo help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:"}},function(t,e,n){var i;!function(o){function a(t){return t&&(t=t.toString().replace(s.pluses,"%20"),t=decodeURIComponent(t)),t}function l(t){var e,n,i,o,l,r,u,c=[];if(void 0===t||null===t||""===t)return c;for(0===t.indexOf("?")&&(t=t.substring(1)),e=0,u=(n=t.toString().split(s.query_separator)).length;e<u;e++)i=n[e],0!==(o=i.indexOf("="))&&(l=a(i.substring(0,o)),r=a(i.substring(o+1)),c.push(-1===o?[i,null]:[l,r]));return c}function r(t){this.uriParts=function(t){var e=s.uri_parser.exec(t||""),n={};return["source","protocol","authority","userInfo","user","password","host","port","isColonUri","relative","path","directory","file","query","anchor"].forEach(function(t,i){n[t]=e[i]||""}),n}(t),this.queryPairs=l(this.uriParts.query),this.hasAuthorityPrefixUserPref=null}var s={starts_with_slashes:/^\/+/,ends_with_slashes:/\/+$/,pluses:/\+/g,query_separator:/[&;]/,uri_parser:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@]*))?)?@)?(\[[0-9a-fA-F:.]+\]|[^:\/?#]*)(?::(\d+|(?=:)))?(:)?)((((?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/};Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,i;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),a=o.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(n=e),i=0;i<a;){var l;i in o&&(l=o[i],t.call(n,l,i,o)),i++}}),["protocol","userInfo","host","port","path","anchor"].forEach(function(t){r.prototype[t]=function(e){return void 0!==e&&(this.uriParts[t]=e),this.uriParts[t]}}),r.prototype.hasAuthorityPrefix=function(t){return void 0!==t&&(this.hasAuthorityPrefixUserPref=t),null===this.hasAuthorityPrefixUserPref?-1!==this.uriParts.source.indexOf("//"):this.hasAuthorityPrefixUserPref},r.prototype.isColonUri=function(t){return void 0===t?!!this.uriParts.isColonUri:void(this.uriParts.isColonUri=!!t)},r.prototype.query=function(t){var e,n,i,o="";for(void 0!==t&&(this.queryPairs=l(t)),e=0,i=this.queryPairs.length;e<i;e++)n=this.queryPairs[e],o.length>0&&(o+="&"),null===n[1]?o+=n[0]:(o+=n[0],o+="=",void 0!==n[1]&&(o+=encodeURIComponent(n[1])));return o.length>0?"?"+o:o},r.prototype.getQueryParamValue=function(t){var e,n,i;for(n=0,i=this.queryPairs.length;n<i;n++)if(e=this.queryPairs[n],t===e[0])return e[1]},r.prototype.getQueryParamValues=function(t){var e,n,i,o=[];for(e=0,i=this.queryPairs.length;e<i;e++)n=this.queryPairs[e],t===n[0]&&o.push(n[1]);return o},r.prototype.deleteQueryParam=function(t,e){var n,i,o,l,r,s=[];for(n=0,r=this.queryPairs.length;n<r;n++)i=this.queryPairs[n],o=a(i[0])===a(t),l=i[1]===e,(1!==arguments.length||o)&&(2!==arguments.length||o&&l)||s.push(i);return this.queryPairs=s,this},r.prototype.addQueryParam=function(t,e,n){return 3===arguments.length&&-1!==n?(n=Math.min(n,this.queryPairs.length),this.queryPairs.splice(n,0,[t,e])):arguments.length>0&&this.queryPairs.push([t,e]),this},r.prototype.hasQueryParam=function(t){var e,n=this.queryPairs.length;for(e=0;e<n;e++)if(this.queryPairs[e][0]==t)return!0;return!1},r.prototype.replaceQueryParam=function(t,e,n){var i,o,l=-1,r=this.queryPairs.length;if(3===arguments.length){for(i=0;i<r;i++)if(o=this.queryPairs[i],a(o[0])===a(t)&&decodeURIComponent(o[1])===a(n)){l=i;break}l>=0&&this.deleteQueryParam(t,a(n)).addQueryParam(t,e,l)}else{for(i=0;i<r;i++)if(o=this.queryPairs[i],a(o[0])===a(t)){l=i;break}this.deleteQueryParam(t),this.addQueryParam(t,e,l)}return this},["protocol","hasAuthorityPrefix","isColonUri","userInfo","host","port","path","query","anchor"].forEach(function(t){var e="set"+t.charAt(0).toUpperCase()+t.slice(1);r.prototype[e]=function(e){return this[t](e),this}}),r.prototype.scheme=function(){var t="";return this.protocol()?(t+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(t+=":"),t+="//"):this.hasAuthorityPrefix()&&this.host()&&(t+="//"),t},r.prototype.origin=function(){var t=this.scheme();return this.userInfo()&&this.host()&&(t+=this.userInfo(),this.userInfo().indexOf("@")!==this.userInfo().length-1&&(t+="@")),this.host()&&(t+=this.host(),(this.port()||this.path()&&this.path().substr(0,1).match(/[0-9]/))&&(t+=":"+this.port())),t},r.prototype.addTrailingSlash=function(){var t=this.path()||"";return"/"!==t.substr(-1)&&this.path(t+"/"),this},r.prototype.toString=function(){var t,e=this.origin();return this.isColonUri()?this.path()&&(e+=":"+this.path()):this.path()?(t=this.path(),s.ends_with_slashes.test(e)||s.starts_with_slashes.test(t)?(e&&e.replace(s.ends_with_slashes,"/"),t=t.replace(s.starts_with_slashes,"/")):e+="/",e+=t):this.host()&&(this.query().toString()||this.anchor())&&(e+="/"),this.query().toString()&&(e+=this.query().toString()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(e+="#"),e+=this.anchor()),e},r.prototype.clone=function(){return new r(this.toString())},void 0===(i=function(){return r}.call(e,n,e,t))||(t.exports=i)}()},function(t,e,n){"use strict";function i(t,e,n){function a(t,e){var i=t[0],a=t[1];r[i]={connect:function(t){return"function"!=typeof t?void console.error("Bad callback given to connect to signal "+i):(r.__objectSignals__[a]=r.__objectSignals__[a]||[],r.__objectSignals__[a].push(t),void(e||"destroyed"===i||n.exec({type:o.connectToSignal,object:r.__id__,signal:a})))},disconnect:function(t){if("function"==typeof t){r.__objectSignals__[a]=r.__objectSignals__[a]||[];var l=r.__objectSignals__[a].indexOf(t);return-1===l?void console.error("Cannot find connection of signal "+i+" to "+t.name):(r.__objectSignals__[a].splice(l,1),void(e||0!==r.__objectSignals__[a].length||n.exec({type:o.disconnectFromSignal,object:r.__id__,signal:a})))}console.error("Bad callback given to disconnect from signal "+i)}}}function l(t,e){var n=r.__objectSignals__[t];n&&n.forEach(function(t){t.apply(t,e)})}this.__id__=t,n.objects[t]=this,this.__objectSignals__={},this.__propertyCache__={};var r=this;this.unwrapQObject=function(t){if(t instanceof Array){for(var e=new Array(t.length),o=0;o<t.length;++o)e[o]=r.unwrapQObject(t[o]);return e}if(!t||!t["__QObject*__"]||void 0===t.id)return t;var a=t.id;if(n.objects[a])return n.objects[a];if(t.data){var l=new i(a,t.data,n);return l.destroyed.connect(function(){if(n.objects[a]===l){delete n.objects[a];var t=[];for(var e in l)t.push(e);for(var i in t)delete l[t[i]]}}),l.unwrapProperties(),l}console.error("Cannot unwrap unknown QObject "+a+" without data.")},this.unwrapProperties=function(){for(var t in r.__propertyCache__)r.__propertyCache__[t]=r.unwrapQObject(r.__propertyCache__[t])},this.propertyUpdate=function(t,e){for(var n in e){var i=e[n];r.__propertyCache__[n]=i}for(var o in t)l(o,t[o])},this.signalEmitted=function(t,e){l(t,e)},e.methods.forEach(function(t){var e=t[0],i=t[1];r[e]=function(){for(var t,e=[],a=0;a<arguments.length;++a)"function"==typeof arguments[a]?t=arguments[a]:e.push(arguments[a]);n.exec({type:o.invokeMethod,object:r.__id__,method:i,args:e},function(e){if(void 0!==e){var n=r.unwrapQObject(e);t&&t(n)}})}}),e.properties.forEach(function(t){var e=t[0],i=t[1],l=t[2];r.__propertyCache__[e]=t[3],l&&(1===l[0]&&(l[0]=i+"Changed"),a(l,!0)),Object.defineProperty(r,i,{get:function(){var t=r.__propertyCache__[e];return void 0===t&&console.warn('Undefined value in property cache for property "'+i+'" in object '+r.__id__),t},set:function(t){return void 0===t?void console.warn("Property setter for "+i+" called with undefined value!"):(r.__propertyCache__[e]=t,void n.exec({type:o.setProperty,object:r.__id__,property:e,value:t}))}})}),e.signals.forEach(function(t){a(t,!1)});for(var t in e.enums)r[t]=e.enums[t]}var o={signal:1,propertyUpdate:2,init:3,idle:4,debug:5,invokeMethod:6,connectToSignal:7,disconnectFromSignal:8,setProperty:9,response:10};t.exports={QWebChannel:function(t,e){if("object"==typeof t&&"function"==typeof t.send){var n=this;this.transport=t,this.send=function(t){"string"!=typeof t&&(t=JSON.stringify(t)),n.transport.send(t)},this.transport.onmessage=function(t){var e=t.data;switch("string"==typeof e&&(e=JSON.parse(e)),e.type){case o.signal:n.handleSignal(e);break;case o.response:n.handleResponse(e);break;case o.propertyUpdate:n.handlePropertyUpdate(e);break;default:console.error("invalid message received:",t.data)}},this.execCallbacks={},this.execId=0,this.exec=function(t,e){return e?(n.execId===Number.MAX_VALUE&&(n.execId=Number.MIN_VALUE),t.hasOwnProperty("id")?void console.error("Cannot exec message with property id: "+JSON.stringify(t)):(t.id=n.execId++,n.execCallbacks[t.id]=e,void n.send(t))):void n.send(t)},this.objects={},this.handleSignal=function(t){var e=n.objects[t.object];e?e.signalEmitted(t.signal,t.args):console.warn("Unhandled signal: "+t.object+"::"+t.signal)},this.handleResponse=function(t){return t.hasOwnProperty("id")?(n.execCallbacks[t.id](t.data),void delete n.execCallbacks[t.id]):void console.error("Invalid response message received: ",JSON.stringify(t))},this.handlePropertyUpdate=function(t){for(var e in t.data){var i=t.data[e],a=n.objects[i.object];a?a.propertyUpdate(i.signals,i.properties):console.warn("Unhandled property update: "+i.object+"::"+i.signal)}n.exec({type:o.idle})},this.debug=function(t){n.send({type:o.debug,data:t})},n.exec({type:o.init},function(t){for(var a in t)new i(a,t[a],n);for(var a in n.objects)n.objects[a].unwrapProperties();e&&e(n),n.exec({type:o.idle})})}else console.error("The QWebChannel expects a transport object with a send function and onmessage callback property. Given is: transport: "+typeof t+", transport.send: "+typeof t.send)}}},function(t,e,n){"use strict";function i(t,e){o.copyFunctions(t.publicInterface,window.tableau),o.copyFunctions(t.privateInterface,window._tableau),e.init()}var o=n(7),a=n(4),l=n(3),r=n(5),s=n(19);t.exports.init=function(){var t=null,e=null;window._tableau={},window.tableauVersionBootstrap?(console.log("Initializing NativeDispatcher, Reporting version number"),window.tableauVersionBootstrap.ReportVersionNumber("2.1.3"),t=new l(window)):window.qt&&window.qt.webChannelTransport?(console.log("Initializing NativeDispatcher for qwebchannel"),window.tableau={},window.channel=new s.QWebChannel(qt.webChannelTransport,function(n){console.log("QWebChannel created successfully"),window._tableau._nativeSetupCompleted=function(){t=new l(n.objects),window.tableau=n.objects.tableau,e.changeTableauApiObj(window.tableau),i(t,e)},n.objects.tableauVersionBootstrap.ReportVersionNumber("2.1.3")})):(console.log("Version Bootstrap is not defined, Initializing SimulatorDispatcher"),window.tableau={},t=new r(window)),e=new a(window.tableau,window._tableau,window),t&&i(t,e)}}])}});