<mat-toolbar class="profile-header">Your Profile</mat-toolbar>
<div class="container" style="">
  <div class="col-mat-8 col-mat-offset-2 verticalScroll">
    <mat-accordion class="headers-align">
      <mat-expansion-panel [expanded]="true" hideToggle="false">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Personal Info
          </mat-panel-title>
          <mat-panel-description>Manage your basic information</mat-panel-description>
        </mat-expansion-panel-header>
        <form class="form" [formGroup]="profileForm">
          <mat-form-field class="full-width">
            <input matInput placeholder="First Name" id="firstName" formControlName="firstName">
            <mat-hint *ngIf="profileForm.controls.firstName.value==''">Required</mat-hint>
            <mat-error *ngIf="profileForm.controls.firstName.errors && profileForm.controls.firstName.errors.required">
              First Name is <strong>required</strong>
            </mat-error>
          </mat-form-field>
          <mat-form-field class="full-width">
            <input matInput placeholder="Last Name" id="lastName" formControlName="lastName">
            <mat-hint *ngIf="profileForm.controls.lastName.value==''">Required</mat-hint>
            <mat-error *ngIf="profileForm.controls.lastName.errors && profileForm.controls.lastName.errors.required">
              Last Name is <strong>required</strong>
            </mat-error>
          </mat-form-field>
          <mat-form-field class="full-width">
            <input matInput placeholder="Company" id="company" formControlName="company">
            <mat-hint *ngIf="profileForm.controls.company.value==''">Required</mat-hint>
            <mat-error *ngIf="profileForm.controls.company.errors && profileForm.controls.company.errors.required">
              Company is <strong>required</strong>
            </mat-error>
          </mat-form-field>
          <mat-form-field class="full-width">
            <input matInput placeholder="Email" id="email" formControlName="email" >
            <mat-hint *ngIf="profileForm.controls.email.value==''">Required</mat-hint>
            <mat-error *ngIf="profileForm.controls.email.errors && profileForm.controls.email.errors.pattern">
              This is not a valid email address
            </mat-error>
            <mat-error *ngIf="profileForm.controls.email.errors && profileForm.controls.email.errors.required">
              Email is <strong>required</strong>
            </mat-error>
          </mat-form-field>
        </form>
        <mat-action-row>
          <button mat-raised-button color="primary" (click)="updateProfile()" [disabled]="!profileForm.valid">Update</button>
        </mat-action-row>
        </mat-expansion-panel>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              Password
            </mat-panel-title>
            <mat-panel-description>Change your Password</mat-panel-description>
          </mat-expansion-panel-header>
          <form class="form" [formGroup]="passwordForm">
            <mat-form-field class="full-width">
              <input matInput placeholder="Existing Password" id="password" formControlName="password" type="password">
              <mat-hint *ngIf="passwordForm.controls.password.value==''">Required</mat-hint>
              <mat-error *ngIf="passwordForm.controls.password.errors && passwordForm.controls.password.errors.required">
                Existing password is <strong>required</strong>
              </mat-error>
            </mat-form-field>
            <mat-form-field class="full-width">
              <input matInput placeholder="New Password" [errorStateMatcher]="matcher" id="newPassword" formControlName="newPassword" type="password">
              <mat-hint *ngIf="passwordForm.controls.newPassword.value==''">Required</mat-hint>
              <mat-error *ngIf="passwordForm.controls.newPassword.errors && passwordForm.controls.newPassword.errors.required">
                New password is <strong>required</strong>
              </mat-error>
              <mat-error *ngIf="passwordForm.controls.newPassword.errors && passwordForm.controls.newPassword.errors.minlength">
                Password must be at least <strong>{{passwordForm.controls.newPassword.errors.minlength.requiredLength}} characters</strong>
              </mat-error>
            </mat-form-field>
            <mat-form-field class="full-width">
              <input matInput placeholder="Confirm Password" [errorStateMatcher]="matcher" id="confirmPassword" formControlName="confirmPassword" type="password">
              <mat-hint *ngIf="passwordForm.controls.confirmPassword.value==''">Required</mat-hint>
              <mat-error *ngIf="passwordForm.controls.confirmPassword.errors && passwordForm.controls.confirmPassword.errors.required">
                Password confirmation is <strong>required</strong>
              </mat-error>
              <mat-error *ngIf="passwordForm.errors && passwordForm.errors.mismatch">
                Passwords do not match
              </mat-error>
              <mat-error *ngIf="passwordForm.controls.confirmPassword.errors && passwordForm.controls.confirmPassword.errors.minlength">
                Password must be at least <strong>{{passwordForm.controls.confirmPassword.errors.minlength.requiredLength}} characters</strong>
              </mat-error>
            </mat-form-field>
          </form>
          <mat-action-row>
            <button mat-raised-button color="primary" (click)="updatePassword()" [disabled]="!passwordForm.valid">Update</button>
          </mat-action-row>
        </mat-expansion-panel>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              Mapbox
            </mat-panel-title>
            <mat-panel-description>Link your Mapbox Account</mat-panel-description>
          </mat-expansion-panel-header>
          <form class="form" [formGroup]="mapboxForm">
            <mat-form-field class="full-width">
              <input matInput placeholder="Username" id="username" formControlName="username" type="text">
              <mat-hint *ngIf="mapboxForm.controls.username.value==''">Required</mat-hint>
              <mat-error *ngIf="mapboxForm.controls.username.errors && mapboxForm.controls.username.errors.required">
                Mapbox Username is <strong>required</strong>
              </mat-error>
            </mat-form-field>
            <mat-form-field class="full-width">
              <input matInput placeholder="Access Token" id="accessToken" formControlName="accessToken" type="password">
              <mat-hint *ngIf="mapboxForm.controls.accessToken.value==''">Required</mat-hint>
              <mat-error *ngIf="mapboxForm.controls.accessToken.errors && mapboxForm.controls.accessToken.errors.required">
                Access Token is <strong>required</strong>
              </mat-error>
            </mat-form-field>
          </form>
          <mat-action-row>
            <button mat-raised-button color="secondary" (click)="testMapbox()" [disabled]="!mapboxForm.valid">Test Account</button>
            <button mat-raised-button color="primary" (click)="updateMapbox()" [disabled]="!mapboxForm.valid">Update</button>
          </mat-action-row>
        </mat-expansion-panel>
    </mat-accordion>
  </div>
</div>
